---
title: "Image mode for Red Hat Enterprise Linuxã®ä¸­èº«ã‚’è¦‹ã¦ã¿ã‚‹"
emoji: "ğŸº"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["rpm-ostree", "ostree", "bootc", "Fedora", "RHEL"]
published: true
---
# ã¯ã˜ã‚ã«

Red Hat Summit 2024ã§Image mode for Red Hat Enterprise LinuxãŒç™ºè¡¨ã•ã‚Œã¾ã—ãŸã€‚Red Hatã‹ã‚‰ã„ãã¤ã‹é–¢é€£æƒ…å ±ãŒå‡ºã¦ã„ã¾ã™ãŒã€ã©ã‚Œã‚‚æŠ½è±¡çš„ã§ã„ã¾ã„ã¡ã‚ˆãã‚ã‹ã‚Šã¾ã›ã‚“ã€‚

- [Red Hat Reimagines Enterprise Linux for the AI Future with Image Mode for Red Hat Enterprise Linux](https://www.redhat.com/en/about/press-releases/red-hat-reimagines-enterprise-linux-ai-future-image-mode-red-hat-enterprise-linux) (ãƒ—ãƒ¬ã‚¹ãƒªãƒªãƒ¼ã‚¹)
- [Experience the AI-ready OS with image mode for Red Hat Enterprise Linux](https://www.redhat.com/en/technologies/linux-platforms/enterprise-linux/image-mode) (è£½å“ãƒšãƒ¼ã‚¸)
- [Image Mode for RHEL ã‚’ä½¿ç”¨ã—ãŸã‚ªãƒšãƒ¬ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚·ã‚¹ãƒ†ãƒ ã®æ§‹ç¯‰ã€ãƒ‡ãƒ—ãƒ­ã‚¤ã€ç®¡ç†](https://access.redhat.com/documentation/ja-jp/red_hat_enterprise_linux/9/html-single/using_image_mode_for_rhel_to_build_deploy_and_manage_operating_systems/index) (è£½å“ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ)

Publickeyã§ã‚‚è¨˜äº‹ãŒå‡ºã¦ã„ã¾ã™ã€‚

- [ã‚³ãƒ³ãƒ†ãƒŠã‚¤ãƒ¡ãƒ¼ã‚¸ãªã®ã«ãƒ–ãƒ¼ãƒˆå¯èƒ½ãªæ–°æŠ€è¡“ã«ã‚ˆã‚‹ã€ŒImage mode for Red Hat Enterprise Linuxã€ã€Red HatãŒç™ºè¡¨ã€‚ãƒ¬ã‚¸ã‚¹ãƒˆãƒªãªã©ã®ã‚³ãƒ³ãƒ†ãƒŠé–¢é€£ãƒ„ãƒ¼ãƒ«ãŒãã®ã¾ã¾åˆ©ç”¨å¯èƒ½](https://www.publickey1.jp/blog/24/image_mode_for_red_hat_enterprise_linuxred_hat.html)

ã€Œã‚³ãƒ³ãƒ†ãƒŠã‚¤ãƒ¡ãƒ¼ã‚¸ãªã®ã«ãƒ–ãƒ¼ãƒˆå¯èƒ½ã€... ã¯ã¦ï¼Ÿ

ã¨ã„ã†ã‚ã‘ã§æœ¬è¨˜äº‹ã§ã¯ã€Image modeãŒã©ã‚“ãªã‚‚ã®ã‹èª¿ã¹ã‚‹ãŸã‚ã«ã€[Image mode for Red Hat Enterprise Linux: A quick start guide](https://www.redhat.com/en/blog/image-mode-red-hat-enterprise-linux-quick-start-guide) (ä»¥ä¸‹ã€Œã‚¯ã‚¤ãƒƒã‚¯ã‚¬ã‚¤ãƒ‰ã€)ã«è¼‰ã£ã¦ã„ã‚‹æ‰‹é †ã«ã—ãŸãŒã£ã¦å®Ÿéš›ã«å‹•ã‹ã—ã¦ã¿ã¾ã—ãŸã€‚ã‚¯ã‚¤ãƒƒã‚¯ã‚¬ã‚¤ãƒ‰ã§ã¯RHELã‚’ä½¿ã£ãŸæ‰‹é †ãŒç´¹ä»‹ã•ã‚Œã¦ã„ã¾ã™ãŒã€æ‰‹å…ƒã§ã¯ãã®ã¾ã¾ã§ã¯å‹•ã‹ãªã‹ã£ãŸéƒ¨åˆ†ã‚‚ã‚ã£ãŸãŸã‚ã€æœ¬è¨˜äº‹ã§ã¯Fedora/CentOS Stream 9ã®ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ä½¿ã„ã¾ã—ãŸã€‚ä»•çµ„ã¿è‡ªä½“ã¯Image mode for RHELã¨åŒã˜ã§ã™ã€‚

ä»¥ä¸‹ã¯2024å¹´5æœˆ9æ—¥æ™‚ç‚¹ã®æ¤œè¨¼çµæœã§ã™ã€‚ã¾ã ã‚‚ã‚Šã‚‚ã‚Šã¨é–‹ç™ºãŒç¶šã„ã¦ã„ã‚‹ã‚ˆã†ãªã®ã§ã€ä»Šå¾Œã¯å¤‰ã‚ã‚‹ã¨ã“ã‚ã‚‚ã‚ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚

# çµè«–ã‚’æœ€åˆã«æ›¸ã„ã¦ãŠãã¨...

Image mode for RHELã‚’ã¾ã¨ã‚ã‚‹ã¨ã€ä»¥ä¸‹ã«ãªã‚Šã¾ã™ã€‚

- Image mode for RHELã¯ã€OSã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ãƒ„ãƒªãƒ¼ã‚’ãƒ¬ã‚¤ãƒ¤ãƒ¼åŒ–ã—ãŸã‚³ãƒ³ãƒ†ãƒŠã‚¤ãƒ¡ãƒ¼ã‚¸ã¨ã—ã¦é…å¸ƒã—ã¾ã™

  - OSã¨ã—ã¦èµ·å‹•ã™ã‚‹ãŸã‚ã®æœ€ä½é™ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å«ã‚€å¿…è¦ãŒã‚ã‚Šã¾ã™(ã‚«ãƒ¼ãƒãƒ«ã€initramfsã€systemdç­‰)

- Image modeã®ã‚³ãƒ³ãƒ†ãƒŠã‚¤ãƒ¡ãƒ¼ã‚¸ã¯ã€(ã‚‚ã¡ã‚ã‚“)ã‚³ãƒ³ãƒ†ãƒŠã¨ã—ã¦èµ·å‹•ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

- Image modeã®ã‚³ãƒ³ãƒ†ãƒŠã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’OSã¨ã—ã¦èµ·å‹•ã™ã‚‹å ´åˆã¯ã€å¯¾è±¡ã¨ã™ã‚‹ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ å‘ã‘ã«åˆæœŸã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ç”¨ã®ã‚¤ãƒ¡ãƒ¼ã‚¸å¤‰æ›ç­‰ãŒå¿…è¦ãªå ´åˆãŒã‚ã‚Šã¾ã™ã€‚ã‚³ãƒ³ãƒ†ãƒŠã‚¤ãƒ¡ãƒ¼ã‚¸ã«å…¥ã£ã¦ã„ã‚‹ã®ã¯ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã‚’å†ç¾ã™ã‚‹ãŸã‚ã®æƒ…å ±ã®ã¿ãªã®ã§ã€ãã‚Œã‚ˆã‚Šã‚‚ä¸‹ã®å±¤(ãƒ‡ã‚£ã‚¹ã‚¯ã®ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ‹ãƒ³ã‚°ã€ãƒ–ãƒ¼ãƒˆãƒ­ãƒ¼ãƒ€ãƒ¼ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ç­‰)ã«ã¤ã„ã¦ã¯ã€æ‰‹å‹•ã‚‚ã—ãã¯ã‚¤ãƒ¡ãƒ¼ã‚¸å¤‰æ›ãƒ„ãƒ¼ãƒ«(bootc-image-builder)ã®ä¸­ã§è¡Œã„ã¾ã™ã€‚

  - ãƒ™ã‚¢ãƒ¡ã‚¿ãƒ«ã®å ´åˆã¯ã€Kickstartã® `ostreecontainer` å‘½ä»¤ã§ç›´æ¥ã‚³ãƒ³ãƒ†ãƒŠã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’æŒ‡å®šã§ãã¾ã™ã€‚ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ä½œæˆã‚„ãƒ–ãƒ¼ãƒˆãƒ­ãƒ¼ãƒ€ãƒ¼ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã¯Kickstartã«ã„ã¤ã‚‚ã©ãŠã‚Šæ‰‹å‹•ã§æ›¸ãå¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
  - KVMä»®æƒ³ãƒã‚·ãƒ³ã®å ´åˆã¯ã€ã‚³ãƒ³ãƒ†ãƒŠã‚¤ãƒ¡ãƒ¼ã‚¸ã‹ã‚‰qcow2ã‚¤ãƒ¡ãƒ¼ã‚¸ã«å¤‰æ›ã—ã¦ã€ãã‚Œã‚’ä½¿ã£ã¦VMã‚’èµ·å‹•ã—ã¾ã™ã€‚ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ã®ä½œæˆã‚„ãƒ–ãƒ¼ãƒˆãƒ­ãƒ¼ãƒ€ãƒ¼ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã¯ã‚¤ãƒ¡ãƒ¼ã‚¸å¤‰æ›ãƒ„ãƒ¼ãƒ«ãŒã‚„ã£ã¦ãã‚Œã¾ã™ã€‚
  - AWSã®EC2ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®å ´åˆã‚‚(ä»¥ä¸‹ç•¥)

- ã“ã®å¤‰æ›ä½œæ¥­ãŒå¿…è¦ãªã®ã¯ã€åˆæœŸã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ™‚ã«ä¸€åº¦ã ã‘ã§ã™ã€‚OSã¨ã—ã¦èµ·å‹•ã—ãŸå¾Œã®OSã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã¯ã€ã‚³ãƒ³ãƒ†ãƒŠã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’æ›´æ–°å¾Œpush â†’ OSä¸Šã§pullã—ã¦å±•é–‹ã—ã¦å†èµ·å‹•ã€ã™ã‚‹ã ã‘ã§ã™

  - åˆæœŸè¨­å®šã§ã¯systemd timerãƒ¦ãƒ‹ãƒƒãƒˆã§å®šæœŸçš„ã«æ›´æ–°ãƒã‚§ãƒƒã‚¯ã—ã¦ã„ã‚‹ãŸã‚ã€OSã®ã‚³ãƒ³ãƒ†ãƒŠã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’æ›´æ–°ã—ã¦ãƒ¬ã‚¸ã‚¹ãƒˆãƒªã«pushã—ã¦ãŠãã¨ã€Image modeã®OSã¯è‡ªå‹•çš„ã«ãã‚Œã‚’pullã—ã¦é©ç”¨ã—ã¦å†èµ·å‹•ã—ã¾ã™ã€‚å®šæœŸãƒã‚§ãƒƒã‚¯ã‚’åœæ­¢ã—ã¦ä»»æ„ã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§æ‰‹å‹•ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚

- ostreeã®ä»•çµ„ã¿ã‚’ä½¿ã£ã¦OSã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã‚’æ§‹æˆã—ã¦ã„ã‚‹ãŸã‚ã€æ¬¡ã®ç‰¹å¾´ãŒã‚ã‚Šã¾ã™

  - è¤‡æ•°ã®ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’å±•é–‹ã—ã¦ãŠãã€èµ·å‹•æ™‚ã«åˆ‡ã‚Šæ›¿ãˆã‚‹ã“ã¨ãŒã§ãã¾ã™ (ã¤ã¾ã‚Šå‰ã®ã‚¤ãƒ¡ãƒ¼ã‚¸ã«ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯ã§ãã¾ã™)
  - `/boot`, `/etc`, `/var` ä»¥å¤–ã¯read onlyãƒã‚¦ãƒ³ãƒˆã—ã¦ã„ã‚‹ãŸã‚ã€ä¸‡ãŒä¸€ä¾µå…¥ã•ã‚ŒãŸã¨ã—ã¦ã‚‚è¢«å®³ã‚’ä½æ¸›ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™
  - OS (ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã‚¤ãƒ¡ãƒ¼ã‚¸) ã«ã‚³ãƒ³ãƒ†ãƒŠã‚¤ãƒ¡ãƒ¼ã‚¸ã¨ã—ã¦ã®å¯æ¬æ€§ã‚’æŒãŸã›ã‚‹ã“ã¨ãŒã§ãã¾ã™ã®ã§ã€CI/CDç­‰ã®ã€Œãƒ†ã‚¹ãƒˆã—ãŸã¨ãã¨åŒã˜å…¨ãç’°å¢ƒã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹ã€ã¨ã„ã†ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã§æ´»èºã§ãã‚‹...ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“

- ã‚³ãƒ³ãƒ†ãƒŠã‚¤ãƒ¡ãƒ¼ã‚¸ã¯å¤šãã®å ´åˆã€rpmãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‹ã‚‰ä½œæˆã™ã‚‹ã¨æ€ã„ã¾ã™ã€‚ãã®å ´åˆã€Image modeã§èµ·å‹•ã—ãŸå ´åˆã§ã‚‚å…ƒã¨ãªã‚‹ãƒ‡ã‚£ã‚¹ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã¨åŒã˜ãƒã‚¤ãƒŠãƒªãŒå‹•ãã¾ã™ (ä¾‹ãˆã°Image mode for RHELã§ã‚ã‚Œã°ã€é€šå¸¸ã®RHELã¨åŒã˜ã‚«ãƒ¼ãƒãƒ«ã‚„ã‚³ãƒãƒ³ãƒ‰ã®ãƒã‚¤ãƒŠãƒªã‚’ä½¿ã„ã¾ã™)ã€‚

Image modeã‚’å®Ÿç¾ã™ã‚‹ãŸã‚ã®è¦ç´ æŠ€è¡“ã¯ä»¥ä¸‹ã§ã™ã€‚

- [ostree](https://github.com/ostreedev/ostree): (è¤‡æ•°ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ãƒ„ãƒªãƒ¼ã‚’Gitãƒªãƒã‚¸ãƒˆãƒªçš„ã«ç®¡ç†ã—ã¦åˆ‡ã‚Šæ›¿ãˆã‚‰ã‚Œã‚‹ã‚ˆã†ã«ã™ã‚‹)

  - ostreeã«ã¤ã„ã¦ã¯ã“ã¡ã‚‰ã®è³‡æ–™ãŒã¨ã¦ã‚‚å‚è€ƒã«ãªã‚Šã¾ã™: [OSTree: OSã‚¤ãƒ¡ãƒ¼ã‚¸ã¨ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚·ã‚¹ãƒ†ãƒ ã®é–“ã«Gitã®ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã‚’](https://www.slideshare.net/i_yudai/ostree-osgit)

- [rpm-ostree](https://github.com/coreos/rpm-ostree): (ostreeã‚’æ§‹æˆã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ç¾¤ã‚’ã€rpmãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ä½¿ã£ã¦æ§‹æˆã™ã‚‹)
- [bootc](https://github.com/containers/bootc): (OCIã‚³ãƒ³ãƒ†ãƒŠã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ä½¿ã£ã¦OSã‚’ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹)

  - bootcã¯Rustã§æ›¸ã‹ã‚Œã¦ã„ã¾ã™ã€‚

- [bootc-image-builder](https://github.com/osbuild/bootc-image-builder): (ã‚³ãƒ³ãƒ†ãƒŠã‚¤ãƒ¡ãƒ¼ã‚¸ã‹ã‚‰å„ç¨®ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ç”¨ã®OSã‚¤ãƒ¡ãƒ¼ã‚¸ã«å¤‰æ›ã™ã‚‹)

ã•ã¦ã€CoreOS (Container Linuxã§ã¯ãªãRed Hatè²·åå¾Œã®æ–¹) ã®ä¸­èº«ã‚’ã”å­˜çŸ¥ã®æ–¹ã¯ã€Image modeã®ç‰¹å¾´ã¯CoreOSã¨ã¨ã¦ã‚‚ã‚ˆãä¼¼ã¦ã„ã‚‹ã¨æ€ã‚ã‚ŒãŸã®ã§ã¯ãªã„ã§ã—ã‚‡ã†ã‹ã€‚å®Ÿéš›ã€ã»ã¨ã‚“ã©ã®éƒ¨åˆ†ã¯CoreOSã¨å…±é€šã§ã™ã€‚CoreOSã«bootcã®ä»•çµ„ã¿ã‚’åˆä½“ã•ã›ãŸã‚‚ã®ãŒImage modeã¨æ€ã£ã¦ã‚‚ã‚ˆã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚

# ã‚³ãƒ³ãƒ†ãƒŠã‚¤ãƒ¡ãƒ¼ã‚¸ã®ä½œæˆ

OSèµ·å‹•ãŠã‚ˆã³Image modeã«å¿…è¦ãªæœ€ä½é™ã®ãƒ„ãƒ¼ãƒ«ã‚’å«ã‚“ã ã‚¤ãƒ¡ãƒ¼ã‚¸(ä»¥ä¸‹bootcã‚¤ãƒ¡ãƒ¼ã‚¸)ãŒç”¨æ„ã•ã‚Œã¦ã„ã‚‹ã®ã§ã€ãã‚Œã‚’ãƒ™ãƒ¼ã‚¹ã«è‡ªåˆ†ã®ã‚³ãƒ³ãƒ†ãƒŠã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ä½œæˆã—ã¾ã™ã€‚

ã‚¯ã‚¤ãƒƒã‚¯ã‚¬ã‚¤ãƒ‰ã§ã¯RHEL 9ãƒ™ãƒ¼ã‚¹ã®bootcã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ãƒ™ãƒ¼ã‚¹ã«ã—ã¦ã„ã¾ã™ãŒã€æœ¬è¨˜äº‹ã§ã¯ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³å¥‘ç´„ã®å¿…è¦ãŒãªã„Fedora 40ãƒ™ãƒ¼ã‚¹ã®bootcã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ä½¿ã„ã¾ã—ãŸã€‚

```
podman pull quay.io/fedora/fedora-bootc:40
```

(ä»¥å¤–ã¨ãƒ¬ã‚¤ãƒ¤ãƒ¼ãŒå¤šã„ã®ãŒå°è±¡çš„ã§ã™)

ã“ã‚Œã‚’ãƒ™ãƒ¼ã‚¹ã«ã—ã¦ã€ä»¥ä¸‹ã®ã‚ˆã†ãªã‚³ãƒ³ãƒ†ãƒŠã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ä½œæˆã—ã¾ã™ã€‚

```
FROM quay.io/fedora/fedora-bootc:40

#install the lamp components
RUN dnf install -y httpd mariadb mariadb-server php-fpm php-mysqlnd && dnf clean all

#start the services automatically on boot
RUN systemctl enable httpd mariadb php-fpm

#create an awe inspiring home page!
RUN echo '<h1 style="text-align:center;">Welcome to image mode for RHEL</h1> <?php phpinfo(); ?>' >> /var/www/html/index.php
```

ã‚¯ã‚¤ãƒƒã‚¯ã‚¬ã‚¤ãƒ‰ã§ã¯ `Containerfile` ã¨ã„ã†åå‰ã®ãƒ•ã‚¡ã‚¤ãƒ«ã«è¨˜è¿°ã—ã¦ã„ã¾ã™ãŒã€ãƒ•ã‚¡ã‚¤ãƒ«åã¯ `Dockerfile` ã§ã‚‚æ§‹ã„ã¾ã›ã‚“ã€‚

```
podman build -f Dockerfile -t quay.io/manabu.ori/lamp-bootc:latest
```

ãƒ†ã‚¹ãƒˆã®ãŸã‚ã€ã‚³ãƒ³ãƒ†ãƒŠã¨ã—ã¦èµ·å‹•ã—ã¦ã¿ã¾ã™ã€‚

```
podman run -d --rm --name lamp -p 8080:80 quay.io/manabu.ori/lamp-bootc:latest /sbin/init
```

ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¾ã™ã€‚

```
$ curl -IL localhost:8080
HTTP/1.1 200 OK
Date: Thu, 09 May 2024 11:08:25 GMT
Server: Apache/2.4.59 (Fedora Linux)
X-Powered-By: PHP/8.3.6
Content-Type: text/html; charset=UTF-8
```

Dockerfileã«è¨˜è¼‰ã—ãŸã¨ãŠã‚Šã€initãŒPID 1ã§ã€ãã®ä¸‹ã«Apache httpdã‚„MariaDBãŒå‹•ã„ã¦ã„ã¾ã™ã€‚

```
$ podman exec lamp ps axjf
   PPID     PID    PGID     SID TTY        TPGID STAT   UID   TIME COMMAND
      0     526       0       0 ?             -1 R        0   0:00 ps axjf
      0       1       1       1 ?             -1 Rs       0   0:01 /sbin/init
      1      33      33      33 ?             -1 Ss       0   0:00 /usr/lib/systemd/systemd-journald
      1      38      38      38 ?             -1 Ss       0   0:00 /usr/lib/systemd/systemd-userdbd
     38      52      38      38 ?             -1 S        0   0:00  \_ systemd-userwork
     38      53      38      38 ?             -1 S        0   0:00  \_ systemd-userwork
     38      54      38      38 ?             -1 S        0   0:00  \_ systemd-userwork
      1     111     111     111 ?             -1 Ss      81   0:00 /usr/bin/dbus-broker-launch --scope system --audit
    111     112     111     111 ?             -1 S       81   0:00  \_ dbus-broker --log 4 --controller 9 --machine-id e74107fdcae9eb21db962afb2df63916 --max-bytes 536870912 --max-fds 4096 --max-matches 131072 --audit
      1     113     113     113 ?             -1 Ssl      0   0:00 /usr/sbin/NetworkManager --no-daemon
      1     114     114     114 ?             -1 Ss      70   0:00 avahi-daemon: registering [e74107fdcae9-5.local]
    114     132     114     114 ?             -1 S       70   0:00  \_ avahi-daemon: chroot helper
      1     120     120     120 ?             -1 Ss       0   0:00 /usr/lib/systemd/systemd-homed
      1     121     121     121 ?             -1 Ss       0   0:00 /usr/lib/systemd/systemd-logind
      1     124     124     124 ?             -1 Ssl      0   0:00 /usr/libexec/udisks2/udisksd
      1     154     154     154 ?             -1 Ss       0   0:00 /usr/lib/systemd/systemd-hostnamed
      1     160     160     160 ?             -1 Ssl      0   0:00 /usr/libexec/nm-dispatcher
      1     164     164     164 ?             -1 Ss       0   0:00 php-fpm: master process (/etc/php-fpm.conf)
    164     267     164     164 ?             -1 S       48   0:00  \_ php-fpm: pool www
    164     269     164     164 ?             -1 S       48   0:00  \_ php-fpm: pool www
    164     272     164     164 ?             -1 S       48   0:00  \_ php-fpm: pool www
    164     274     164     164 ?             -1 S       48   0:00  \_ php-fpm: pool www
    164     275     164     164 ?             -1 S       48   0:00  \_ php-fpm: pool www
      1     181     181     181 ?             -1 Ssl      0   0:00 /usr/sbin/gssproxy -D
      1     187     187     187 ?             -1 Ss       0   0:00 sshd: /usr/sbin/sshd -D [listener] 0 of 10-100 startups
      1     203     203     203 ?             -1 Ss       0   0:00 /usr/sbin/httpd -DFOREGROUND
    203     298     203     203 ?             -1 S       48   0:00  \_ /usr/sbin/httpd -DFOREGROUND
    203     300     203     203 ?             -1 Sl      48   0:00  \_ /usr/sbin/httpd -DFOREGROUND
    203     302     203     203 ?             -1 Sl      48   0:00  \_ /usr/sbin/httpd -DFOREGROUND
    203     329     203     203 ?             -1 Sl      48   0:00  \_ /usr/sbin/httpd -DFOREGROUND
      1     221     221     221 ?             -1 Zs      27   0:00 [mariadb-prepare] <defunct>
```

ã‚³ãƒ³ãƒ†ãƒŠã‚’åœæ­¢ã—ã¾ã™ã€‚

```
podman stop lamp
```

ã‚³ãƒ³ãƒ†ãƒŠãƒ¬ã‚¸ã‚¹ãƒˆãƒªã«pushã—ã¾ã™ã€‚

```
podman login quay.io
podman push quay.io/manabu.ori/lamp-bootc:latest
```

# qcow2ã‚¤ãƒ¡ãƒ¼ã‚¸ã®ä½œæˆ

ã‚¤ãƒ¡ãƒ¼ã‚¸å¤‰æ›ã¯rootãƒ¦ãƒ¼ã‚¶ãƒ¼ã§å®Ÿè¡Œã—ã¾ã™ã€‚

Podmanã¯å®Ÿè¡Œãƒ¦ãƒ¼ã‚¶ãƒ¼ã”ã¨ã«ã‚³ãƒ³ãƒ†ãƒŠã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ãŒç•°ãªã‚‹ãŸã‚ã€ã¾ãšä½œæˆã—ãŸã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’rootã§pullã—ã¦ãŠãã¾ã™ã€‚

```
sudo podman image pull quay.io/manabu.ori/lamp-bootc:latest
```

bootc-image-builderã®ã‚³ãƒ³ãƒ•ã‚£ã‚°ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ `config.json` ã¨ã—ã¦ä½œæˆã—ã¾ã™ (tomlã§ã‚‚æ›¸ã‘ã‚‹ã‚ˆã†ã§ã™ãŒã€ã‚¯ã‚¤ãƒƒã‚¯ã‚¬ã‚¤ãƒ‰ã«ãã£ã¦jsonã«ã—ã¾ã—ãŸ)ã€‚

```
{
 "blueprint": {
   "customizations": {
     "user": [
       {
         "name": "cloud-user",
         "password": "changeme",
         "key": "ssh-rsa AAAAB3Nz...",
         "groups": [
           "wheel"
         ]
       }
     ]
   }
 }
}
```

bootc-image-builder (ã®ã‚³ãƒ³ãƒ†ãƒŠ) ã‚’ä½¿ã£ã¦ã€ä½œæˆã—ãŸã‚³ãƒ³ãƒ†ãƒŠã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’qcow2ã‚¤ãƒ¡ãƒ¼ã‚¸ã«å¤‰æ›ã—ã¾ã™ã€‚

```
mkdir -p output
sudo podman run \
    --rm \
    -it \
    --privileged \
    --pull=newer \
    --security-opt label=type:unconfined_t \
    -v /var/lib/containers/storage:/var/lib/containers/storage \
    -v $(pwd)/config.json:/config.json \
    -v $(pwd)/output:/output \
    quay.io/centos-bootc/bootc-image-builder:latest \
    --type qcow2 \
    --local \
    --rootfs xfs \
    --log-level info \
    quay.io/manabu.ori/lamp-bootc:latest
```

(çµæ§‹æ™‚é–“ãŒã‹ã‹ã‚Šã¾ã™)

# ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’OSã¨ã—ã¦èµ·å‹•

qcow2ã«å¤‰æ›ã—ãŸã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’KVMä»®æƒ³ãƒã‚·ãƒ³ã¨ã—ã¦èµ·å‹•ã—ã¾ã™ã€‚

```
sudo virt-install --name lamp-bootc --memory 4096 --vcpus 2 --disk ./output/qcow2/disk.qcow2 --import --os-variant rhel9.4
```

## å‹•ä½œç¢ºèª

IPã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’èª¿ã¹ã¦ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦ã¿ã¾ã™ã€‚

```
$ sudo virsh domifaddr lamp-bootc
 Name       MAC address          Protocol     Address
-------------------------------------------------------------------------------
 vnet61     52:54:00:6f:da:1c    ipv4         192.168.124.31/24
```

```
$ curl -IL 192.168.124.31
HTTP/1.1 200 OK
Date: Thu, 09 May 2024 15:29:59 GMT
Server: Apache/2.4.59 (Fedora Linux)
X-Powered-By: PHP/8.3.6
Content-Type: text/html; charset=UTF-8
```

# ä»®æƒ³ãƒã‚·ãƒ³ã®ä¸­ã‚’è¦‹ã¦ã¿ã‚‹

config.jsonã«è¨­å®šã—ãŸéµã‚‚ã—ãã¯ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã§ãƒ­ã‚°ã‚¤ãƒ³ã—ã¾ã™ã€‚

```
ssh -i PRIVATE_KEY -l cloud-user 192.168.124.31
```

ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã¯ã€Image modeã§èµ·å‹•ã—ãŸä»®æƒ³ãƒã‚·ãƒ³ä¸Šã§å®Ÿè¡Œã—ã¾ã™ã€‚

```
$ cat /etc/fedora-release
Fedora release 40 (Forty)
```

```
$ uname -r
6.8.8-300.fc40.x86_64
```

ã‚«ãƒ¼ãƒãƒ«ã®èµ·å‹•ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã§`ostree=...` ã«ã‚ˆã£ã¦èµ·å‹•ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ãƒ„ãƒªãƒ¼ã®IDã‚’æŒ‡å®šã—ã¦ã„ã¾ã™ã€‚

```
$ cat /proc/cmdline
BOOT_IMAGE=(hd0,gpt3)/boot/ostree/default-7292e7ed0ab72bdf2384d177b90601f1e86c37d32aeb67c59d974adcf5300e21/vmlinuz-6.8.8-300.fc40.x86_64 root=UUID=d1eea7fc-73f9-4a87-9dd1-ad0e903b9718 rw boot=UUID=60ef6a56-5356-48d8-83ae-c6f154ccbef8 rw console=tty0 console=ttyS0 ostree=/ostree/boot.1/default/7292e7ed0ab72bdf2384d177b90601f1e86c37d32aeb67c59d974adcf5300e21/0
```

```
$ rpm-ostree status
State: idle
Deployments:
â— ostree-unverified-registry:quay.io/manabu.ori/lamp-bootc:latest
                   Digest: sha256:6530390c80ab7cb4e4d80361b13b6eccba92d746360b0530563830884437296a
                  Version: 40.20240508.0 (2024-05-09T11:02:20Z)
```

# ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ 

ostreeã®ãƒªãƒã‚¸ãƒˆãƒªãŒ `/sysroot` ã«ã‚ã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã€‚

```
$ lsblk
NAME   MAJ:MIN RM  SIZE RO TYPE MOUNTPOINTS
loop0    7:0    0  9.8M  1 loop
vda    252:0    0   10G  0 disk
â”œâ”€vda1 252:1    0    1M  0 part
â”œâ”€vda2 252:2    0  501M  0 part /boot/efi
â”œâ”€vda3 252:3    0    1G  0 part /boot
â””â”€vda4 252:4    0  8.5G  0 part /var
                                /sysroot/ostree/deploy/default/var
                                /etc
                                /sysroot
```

```
$ df -h
Filesystem      Size  Used Avail Use% Mounted on
/dev/vda4       8.5G  2.2G  6.4G  25% /sysroot
overlay         9.8M  9.8M     0 100% /
devtmpfs        4.0M     0  4.0M   0% /dev
tmpfs           2.0G     0  2.0G   0% /dev/shm
tmpfs           782M  808K  782M   1% /run
tmpfs           2.0G     0  2.0G   0% /tmp
/dev/vda3       974M   83M  824M  10% /boot
/dev/vda2       501M  7.5M  494M   2% /boot/efi
tmpfs           391M  4.0K  391M   1% /run/user/1000
```

`/` ãŒ `ro` ã§ã€`/boot`, `/etc`, `/var` ãŒ `rw` ã§ãƒã‚¦ãƒ³ãƒˆã•ã‚Œã¦ã„ã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã€‚

```
$ findmnt
TARGET                                 SOURCE                                                                                                          FSTYPE      OPTIONS
/                                      overlay                                                                                                         overlay     ro,relatime,seclabel,lowerdir=/run/ostree/.private/cfsroot-lower::/sysroot/ostree/repo/objects,redirect_dir=on,metacopy=on
â”œâ”€/tmp                                 tmpfs                                                                                                           tmpfs       rw,nosuid,nodev,seclabel,size=2001496k,nr_inodes=1048576,inode64
â”œâ”€/dev                                 devtmpfs                                                                                                        devtmpfs    rw,nosuid,seclabel,size=4096k,nr_inodes=491976,mode=755,inode64
â”‚ â”œâ”€/dev/hugepages                     hugetlbfs                                                                                                       hugetlbfs   rw,nosuid,nodev,relatime,seclabel,pagesize=2M
â”‚ â”œâ”€/dev/mqueue                        mqueue                                                                                                          mqueue      rw,nosuid,nodev,noexec,relatime,seclabel
â”‚ â”œâ”€/dev/shm                           tmpfs                                                                                                           tmpfs       rw,nosuid,nodev,seclabel,inode64
â”‚ â””â”€/dev/pts                           devpts                                                                                                          devpts      rw,nosuid,noexec,relatime,seclabel,gid=5,mode=620,ptmxmode=000
â”œâ”€/sys                                 sysfs                                                                                                           sysfs       rw,nosuid,nodev,noexec,relatime,seclabel
â”‚ â”œâ”€/sys/fs/selinux                    selinuxfs                                                                                                       selinuxfs   rw,nosuid,noexec,relatime
â”‚ â”œâ”€/sys/kernel/debug                  debugfs                                                                                                         debugfs     rw,nosuid,nodev,noexec,relatime,seclabel
â”‚ â”œâ”€/sys/kernel/tracing                tracefs                                                                                                         tracefs     rw,nosuid,nodev,noexec,relatime,seclabel
â”‚ â”œâ”€/sys/fs/fuse/connections           fusectl                                                                                                         fusectl     rw,nosuid,nodev,noexec,relatime
â”‚ â”œâ”€/sys/kernel/security               securityfs                                                                                                      securityfs  rw,nosuid,nodev,noexec,relatime
â”‚ â”œâ”€/sys/fs/cgroup                     cgroup2                                                                                                         cgroup2     rw,nosuid,nodev,noexec,relatime,seclabel,nsdelegate,memory_recursiveprot
â”‚ â”œâ”€/sys/fs/pstore                     pstore                                                                                                          pstore      rw,nosuid,nodev,noexec,relatime,seclabel
â”‚ â”œâ”€/sys/fs/bpf                        bpf                                                                                                             bpf         rw,nosuid,nodev,noexec,relatime,mode=700
â”‚ â””â”€/sys/kernel/config                 configfs                                                                                                        configfs    rw,nosuid,nodev,noexec,relatime
â”œâ”€/proc                                proc                                                                                                            proc        rw,nosuid,nodev,noexec,relatime
â”‚ â””â”€/proc/sys/fs/binfmt_misc           systemd-1                                                                                                       autofs      rw,relatime,fd=36,pgrp=1,timeout=0,minproto=5,maxproto=5,direct,pipe_ino=2908
â”‚   â””â”€/proc/sys/fs/binfmt_misc         binfmt_misc                                                                                                     binfmt_misc rw,nosuid,nodev,noexec,relatime
â”œâ”€/run                                 tmpfs                                                                                                           tmpfs       rw,nosuid,nodev,seclabel,size=800600k,nr_inodes=819200,mode=755,inode64
â”‚ â””â”€/run/user/1000                     tmpfs                                                                                                           tmpfs       rw,nosuid,nodev,relatime,seclabel,size=400296k,nr_inodes=100074,mode=700,uid=1000,gid=1000,inode64
â”œâ”€/var                                 /dev/vda4[/ostree/deploy/default/var]                                                                           xfs         rw,relatime,seclabel,attr2,inode64,logbufs=8,logbsize=32k,noquota
â”‚ â””â”€/var/lib/nfs/rpc_pipefs            sunrpc                                                                                                          rpc_pipefs  rw,relatime
â”œâ”€/boot                                /dev/vda3                                                                                                       ext4        ro,relatime,seclabel
â”‚ â””â”€/boot/efi                          /dev/vda2                                                                                                       vfat        rw,relatime,fmask=0077,dmask=0077,codepage=437,iocharset=ascii,shortname=winnt,errors=remount-ro
â”œâ”€/sysroot                             /dev/vda4                                                                                                       xfs         ro,relatime,seclabel,attr2,inode64,logbufs=8,logbsize=32k,noquota
â”‚ â””â”€/sysroot/ostree/deploy/default/var /dev/vda4[/ostree/deploy/default/var]                                                                           xfs         rw,relatime,seclabel,attr2,inode64,logbufs=8,logbsize=32k,noquota
â””â”€/etc                                 /dev/vda4[/ostree/deploy/default/deploy/c3342872193d11d77bf00a0da655280c3d5057e3963a641e816b9e300598b90e.0/etc] xfs         rw,relatime,seclabel,attr2,inode64,logbufs=8,logbsize=32k,noquota
```

ã¡ãªã¿ã« `/home`, `/root` ã¯ãã‚Œãã‚Œ `/var/home`, `/var/roothome` ã®ã‚·ãƒ³ãƒœãƒªãƒƒã‚¯ãƒªãƒ³ã‚¯ã§ã™ã€‚

```
$ ls -l /home /root
lrwxrwxrwx. 1 root root  8 Jan  1  1970 /home -> var/home
lrwxrwxrwx. 1 root root 12 Jan  1  1970 /root -> var/roothome
```

ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ `bootc-fetch-apply-updates.timer` ã¨ã„ã†timer unitãŒå‹•ã„ã¦ã„ã¾ã™ã€‚

```
$ systemctl status bootc-fetch-apply-updates.timer
â— bootc-fetch-apply-updates.timer - Apply bootc updates
     Loaded: loaded (/usr/lib/systemd/system/bootc-fetch-apply-updates.timer; disabled; preset: disabled)
     Active: active (waiting) since Thu 2024-05-09 12:48:33 UTC; 2h 53min ago
    Trigger: Thu 2024-05-09 22:15:29 UTC; 6h left
   Triggers: â— bootc-fetch-apply-updates.service
       Docs: man:bootc(8)

May 09 12:48:33 fedora systemd[1]: Started bootc-fetch-apply-updates.timer - Apply bootc updates.
```

```
$ systemctl cat bootc-fetch-apply-updates.timer
# /usr/lib/systemd/system/bootc-fetch-apply-updates.timer
[Unit]
Description=Apply bootc updates
Documentation=man:bootc(8)
ConditionPathExists=/run/ostree-booted

[Timer]
OnBootSec=1h
# This time is relatively arbitrary and obviously expected to be overridden/changed
OnUnitInactiveSec=8h
# When deploying a large number of systems, it may be beneficial to increase this value to help with load on the registry.
RandomizedDelaySec=2h

[Install]
WantedBy=timers.target
```

ã“ã®timer unitã®ä¸­ã§ã¯ `bootc update --apply` ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ã„ã¾ã™ã€‚

```
$ cat /usr/lib/systemd/system/bootc-fetch-apply-updates.service
[Unit]
Description=Apply bootc updates
Documentation=man:bootc(8)
ConditionPathExists=/run/ostree-booted

[Service]
Type=oneshot
ExecStart=/usr/bin/bootc update --apply --quiet
```

ã“ã®ã‚³ãƒãƒ³ãƒ‰ã‚’æ‰‹å‹•ã§å®Ÿè¡Œã™ã‚‹ã¨ã€å®Ÿè¡Œã—ãŸã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§OSã®ã‚³ãƒ³ãƒ†ãƒŠã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’å–å¾—ã—ã¦é©ç”¨å¾Œã€å†èµ·å‹•ã—ã¾ã™ã€‚OSèµ·å‹•å¾Œã®ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã§ã¯ã€åˆæœŸã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ™‚ã®ã‚ˆã†ãªbootc-image-builderã«ã‚ˆã‚‹qcow2ã¸ã®å¤‰æ›ã¯å¿…è¦ãªãã€ã‚³ãƒ³ãƒ†ãƒŠã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ç›´æ¥ä½¿ç”¨ã§ãã¾ã™ã€‚

timer unitã«ã‚ˆã‚‹ã‚³ãƒ³ãƒ†ãƒŠã‚¤ãƒ¡ãƒ¼ã‚¸ã®æ›´æ–°â†’å†èµ·å‹•æ™‚ã®journaldã®ãƒ­ã‚°ã®æŠœç²‹ã¯ã“ã®ã‚ˆã†ãªæ„Ÿã˜ã«ãªã‚Šã¾ã™ã€‚

```
<snip>
May 09 12:44:41 fedora systemd[1]: Starting bootc-fetch-apply-updates.service - Apply bootc updates...
May 09 12:44:41 fedora kernel: SELinux:  Context system_u:object_r:invalid_bootcinstall_testlabel_t:s0 is not valid (left unmapped).
May 09 12:44:41 fedora kernel: EXT4-fs (vda3): re-mounted 60ef6a56-5356-48d8-83ae-c6f154ccbef8 r/w. Quota mode: none.
May 09 12:44:42 fedora bootc[1674]: Fetching ostree-unverified-registry:quay.io/manabu.ori/lamp-bootc:latest
May 09 12:44:46 fedora bootc[1674]: layers already present: 68; layers needed: 1 (150 bytes)
May 09 12:44:46 fedora bootc[1674]: layers already present: 68; layers needed: 1 (150 bytes)
May 09 12:45:26 fedora bootc[1674]: Image contains non-ostree compatible file paths: run: 1
May 09 12:47:22 fedora systemd[1]: Starting ostree-finalize-staged-hold.service - Hold /boot Open for OSTree Finalize Staged Deployment...
May 09 12:47:22 fedora systemd[1]: Started ostree-finalize-staged-hold.service - Hold /boot Open for OSTree Finalize Staged Deployment.
May 09 12:47:22 fedora systemd[1]: Finished ostree-finalize-staged.service - OSTree Finalize Staged Deployment.
May 09 12:47:27 fedora bootc[1674]: Queued for next boot: quay.io/manabu.ori/lamp-bootc:latest
May 09 12:47:27 fedora bootc[1674]:   Version: 40.20240508.0
May 09 12:47:27 fedora bootc[1674]:   Digest: sha256:b9be0d08af0091b171b3730b307e2c2113f314b14e633be90193c92a64b8bcad
May 09 12:47:27 fedora bootc[1674]: Total new layers: 69    Size: 868.0Â MB
May 09 12:47:27 fedora bootc[1674]: Removed layers:   0     Size: 0 bytes
May 09 12:47:27 fedora bootc[1674]: Added layers:     1     Size: 150 bytes
May 09 12:47:27 fedora bootc[1674]: Rebooting system
May 09 12:47:27 fedora systemd-logind[793]: The system will reboot now!
May 09 12:47:27 fedora systemd-logind[793]: System is rebooting.
May 09 12:47:27 fedora systemd[1]: Stopping session-1.scope - Session 1 of User cloud-user...
<snip>
```

ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆå¾Œã¯ã€ostreeã®ãƒ„ãƒªãƒ¼ãŒ2ã¤ã«å¢—ãˆã¦ã„ã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ (ä¸‹ã®ä¾‹ã§ã¯Versionã®ç•ªå·ãŒåŒã˜ã«ãªã£ã¦ã„ã¾ã™ãŒã€ã‚³ãƒ³ãƒ†ãƒŠã‚¤ãƒ¡ãƒ¼ã‚¸ã®LABELã‹ä½•ã‹ã§æ­£ã—ãæŒ‡å®šã™ã‚‹ã¨å¤‰ãˆã‚‰ã‚Œã‚‹...ã¯ãš...)ã€‚

```
$ rpm-ostree status
State: idle
Deployments:
â— ostree-unverified-registry:quay.io/manabu.ori/lamp-bootc:latest
                   Digest: sha256:b9be0d08af0091b171b3730b307e2c2113f314b14e633be90193c92a64b8bcad
                  Version: 40.20240508.0 (2024-05-09T11:58:43Z)

  ostree-unverified-registry:quay.io/manabu.ori/lamp-bootc:latest
                   Digest: sha256:6530390c80ab7cb4e4d80361b13b6eccba92d746360b0530563830884437296a
                  Version: 40.20240508.0 (2024-05-09T11:02:20Z)
```

